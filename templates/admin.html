<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>签到名单</title>
    <link rel="stylesheet" href="/static/layui.css">
</head>
<body>
<ul class="layui-nav">
    <li class="layui-nav-item">签到名单</li>
    <li class="layui-nav-item layui-layout-right">
        <button class="layui-btn layui-btn-normal" onclick="reset()">重置</button>
        <span>&nbsp;&nbsp;&nbsp;</span>
    </li>
</ul>
<div class="layui-container">
    <table class="layui-table" id="app">
        <colgroup>
            <col width="150">
            <col>
            <col width="150">
            <col width="100">
        </colgroup>
        <thead>
        <tr>
            <th>姓名</th>
            <th>单位</th>
            <th>性别</th>
            <th>签到状态</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="user in users">
            <td v-text="user.stu_name"></td>
            <td v-text="user.stu_unit"></td>
            <td v-text="user.stu_gender"></td>
            <td v-if="user.attendance == 0" style="background-color:#FF9966">未签到</td>
            <td v-if="user.attendance == 1" style="background-color:#00CC99">已签到</td>
        </tr>
        </tbody>
    </table>
</div>

<script type='text/javascript' src='/static/vue.min.js' charset='utf-8'></script>
<script type='text/javascript' src='/static/vue-resource.min.js' charset='utf-8'></script>
<script type="text/javascript">
    var refresh_data = function () {
        Vue.http.get("/getlist").then(function (response) {
            app.users = response.body;
        });
    };
    var reset = function() {
        if (confirm("确认重置？")) {
            Vue.http.get("/reset").then(function (response) {
                refresh_data();
            });
        };
    };
    var app = new Vue({
        el: '#app',
        data: {
            users: []
        },
        mounted: function() {
            refresh_data();
            setInterval("refresh_data()", 5000);
        },
        ready: function () {
            refresh_data();
            setInterval("refresh_data()", 5000);
        }
    });
</script>
</body>
</html>s